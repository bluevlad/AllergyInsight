# AllergyInsight 프로젝트 WBS (Work Breakdown Structure)

> 최종 업데이트: 2025-01-27 (v1.1)

## 프로젝트 개요

| 항목 | 내용 |
|------|------|
| 프로젝트명 | AllergyInsight |
| 목표 | 알러지 검사 결과 기반 맞춤형 건강 정보 및 의료 전문가용 처방 권고 시스템 |
| 서비스 구분 | Professional (B2B), Consumer (B2C) |
| 현재 버전 | v2.0.0 |

---

## 전체 진행 현황

```
전체 진행율: ███████████░░░░░░░░░ 55%
```

| 대분류 | 진행율 | 상태 |
|--------|--------|------|
| 1. 기반 인프라 | 100% | ✅ 완료 |
| 2. 인증 시스템 | 100% | ✅ 완료 |
| 3. 병원 서비스 | 70% | 🔄 진행중 |
| 4. 임상 문서 시스템 | 50% | 🔄 진행중 |
| 5. 논문 시스템 | 60% | 🔄 진행중 |
| 6. 리포트/출력 | 10% | ⏳ 예정 |
| 7. 안정성/품질 | 20% | ⏳ 예정 |
| 8. Q&A 시스템 | 15% | 🔄 진행중 |
| 9. 임상 정확도 | 0% | ⏳ 예정 |

---

## 상세 WBS

### 1. 기반 인프라 [100%] ✅

| ID | 작업 | 상태 | 진행율 | 비고 |
|----|------|------|--------|------|
| 1.1 | 서비스 이원화 (Professional/Consumer) | ✅ | 100% | v2.0.0 |
| 1.2 | Docker 환경 구성 | ✅ | 100% | prod/dev 분리 |
| 1.3 | CI/CD 파이프라인 | ✅ | 100% | 조건부 배포 적용 |
| 1.4 | 브랜치 워크플로우 | ✅ | 100% | feature→master→prod |

---

### 2. 인증 시스템 [100%] ✅

| ID | 작업 | 상태 | 진행율 | 비고 |
|----|------|------|--------|------|
| 2.1 | Google OAuth 로그인 | ✅ | 100% | |
| 2.2 | PIN 기반 간편 로그인 | ✅ | 100% | |
| 2.3 | JWT 토큰 인증 | ✅ | 100% | |
| 2.4 | 역할 기반 접근 제어 (RBAC) | ✅ | 100% | 6개 역할 |

---

### 3. 병원 서비스 [70%] 🔄

#### Phase 1: 기반 구축 [100%] ✅

| ID | 작업 | 상태 | 진행율 |
|----|------|------|--------|
| 3.1.1 | Organization 모델 | ✅ | 100% |
| 3.1.2 | OrganizationMember 모델 | ✅ | 100% |
| 3.1.3 | HospitalPatient 모델 | ✅ | 100% |
| 3.1.4 | 역할 체계 확장 | ✅ | 100% |
| 3.1.5 | 권한 미들웨어 | ✅ | 100% |

#### Phase 2: 환자 관리 [90%] ✅

| ID | 작업 | 상태 | 진행율 |
|----|------|------|--------|
| 3.2.1 | 병원-환자 연결 시스템 | ✅ | 100% |
| 3.2.2 | 환자 동의서 관리 | ✅ | 100% |
| 3.2.3 | 병원 대시보드 UI | ✅ | 100% |
| 3.2.4 | 환자 목록/검색 | ✅ | 100% |
| 3.2.5 | 진단 워크플로우 | 🔄 | 70% | 고도화 필요 |

#### Phase 3: 고급 기능 [10%] ⏳

| ID | 작업 | 상태 | 진행율 | 우선순위 |
|----|------|------|--------|----------|
| 3.3.1 | 병원별 통계 리포트 | ⏳ | 0% | 중 |
| 3.3.2 | 알러젠별 환자 분포 | ⏳ | 0% | 중 |
| 3.3.3 | SMS/이메일 알림 | ⏳ | 0% | 중 |
| 3.3.4 | 의사 소견 UI 개선 | ⏳ | 20% | 높음 |

#### Phase 4: 외부 연동 [0%] ⏳

| ID | 작업 | 상태 | 진행율 | 우선순위 |
|----|------|------|--------|----------|
| 3.4.1 | 검사 결과 자동 연동 (batch/API) | ⏳ | 0% | 낮음 |
| 3.4.2 | 다국어 지원 | ⏳ | 0% | 낮음 |

---

### 4. 임상 문서 시스템 [50%] 🔄

#### Phase 1: 핵심 기능 [100%] ✅

| ID | 작업 | 상태 | 진행율 |
|----|------|------|--------|
| 4.1.1 | ClinicalStatement 모델 | ✅ | 100% |
| 4.1.2 | GRADE 근거 수준 체계 | ✅ | 100% |
| 4.1.3 | 가이드라인 논문 시드 | ✅ | 100% |
| 4.1.4 | 임상 진술문 시드 | ✅ | 100% |
| 4.1.5 | Clinical Report API | ✅ | 100% |
| 4.1.6 | ClinicalReportPage UI | ✅ | 100% |

#### Phase 2: 고급 기능 [20%] ⏳

| ID | 작업 | 상태 | 진행율 | 우선순위 |
|----|------|------|--------|----------|
| 4.2.1 | 임상 보고서 PDF 출력 | ⏳ | 0% | 높음 |
| 4.2.2 | 환자용 결과지 PDF | ⏳ | 0% | 높음 |
| 4.2.3 | ICD-10 코드 자동 매핑 개선 | ⏳ | 30% | 높음 |
| 4.2.4 | 의사 소견 입력 UI 강화 | ⏳ | 20% | 높음 |

#### Phase 3: 논문 연동 [0%] ⏳

| ID | 작업 | 상태 | 진행율 | 우선순위 |
|----|------|------|--------|----------|
| 4.3.1 | PubMed 논문 자동 검증 | ⏳ | 0% | 중 |
| 4.3.2 | 논문-진술문 자동 매핑 | ⏳ | 0% | 중 |

#### Phase 4: 확장 (장기) [0%] ⏳

| ID | 작업 | 상태 | 진행율 | 우선순위 |
|----|------|------|--------|----------|
| 4.4.1 | SOAP Note 임상 노트 | ⏳ | 0% | 낮음 |
| 4.4.2 | 치료 프로토콜 템플릿 | ⏳ | 0% | 낮음 |

---

### 5. 논문 시스템 [60%] 🔄

| ID | 작업 | 상태 | 진행율 |
|----|------|------|--------|
| 5.1 | PubMed 검색 연동 | ✅ | 100% |
| 5.2 | Semantic Scholar 연동 | ✅ | 100% |
| 5.3 | 논문 저장/관리 | ✅ | 90% |
| 5.4 | 키워드 기반 자동 링크 추출 | ✅ | 80% |
| 5.5 | 출처 표시 UI (CitationBadge) | ✅ | 100% |
| 5.6 | MeSH Terms 활용 | ⏳ | 0% |
| 5.7 | LLM 기반 추출 | ⏳ | 0% |

---

### 6. 리포트/출력 시스템 [10%] ⏳

| ID | 작업 | 상태 | 진행율 | 우선순위 |
|----|------|------|--------|----------|
| 6.1 | 임상 보고서 PDF | ⏳ | 0% | 높음 |
| 6.2 | 환자 가이드 PDF | ⏳ | 0% | 높음 |
| 6.3 | 통계 리포트 | ⏳ | 0% | 중 |
| 6.4 | 처방전 출력 | ⏳ | 0% | 중 |

---

### 7. 안정성/품질 [20%] ⏳

| ID | 작업 | 상태 | 진행율 | 우선순위 |
|----|------|------|--------|----------|
| 7.1 | Backend 테스트 (pytest) | ⏳ | 0% | 필수 |
| 7.2 | Frontend 테스트 (jest) | ⏳ | 0% | 필수 |
| 7.3 | API 에러 핸들링 개선 | ⏳ | 30% | 필수 |
| 7.4 | 로깅/모니터링 | ⏳ | 20% | 높음 |
| 7.5 | OpenAPI 문서 보완 | ⏳ | 50% | 중 |

---

### 8. Q&A 시스템 [15%] 🔄

> 📄 상세: `docs/roadmap/QA_SYSTEM_ENHANCEMENT.md`

#### 현재 상태
- 단순 LIKE 검색 기반
- 키워드 추출 없음 → 검색 실패율 높음
- 신뢰도 30% (논문 미발견 시)

#### Phase 1: 키워드 및 동의어 [0%] ⏳

| ID | 작업 | 상태 | 진행율 | 우선순위 |
|----|------|------|--------|----------|
| 8.1.1 | 한글 형태소 분석 (konlpy) | ⏳ | 0% | 높음 |
| 8.1.2 | 의학 용어 동의어 사전 | ⏳ | 0% | 높음 |
| 8.1.3 | 질문 의도 분류기 | ⏳ | 0% | 높음 |

#### Phase 2: 하이브리드 검색 [0%] ⏳

| ID | 작업 | 상태 | 진행율 | 우선순위 |
|----|------|------|--------|----------|
| 8.2.1 | BM25 키워드 검색 | ⏳ | 0% | 높음 |
| 8.2.2 | 시맨틱 검색 (sentence-transformers) | ⏳ | 0% | 높음 |
| 8.2.3 | pgvector 벡터 DB 설치 | ⏳ | 0% | 높음 |
| 8.2.4 | 논문 임베딩 인덱싱 | ⏳ | 0% | 높음 |
| 8.2.5 | RRF 점수 통합 | ⏳ | 0% | 중 |

#### Phase 3: LLM 통합 [0%] ⏳

| ID | 작업 | 상태 | 진행율 | 우선순위 |
|----|------|------|--------|----------|
| 8.3.1 | Claude/GPT API 연동 | ⏳ | 0% | 중 |
| 8.3.2 | 의도별 프롬프트 템플릿 | ⏳ | 0% | 중 |
| 8.3.3 | 자동 출처 인용 | ⏳ | 0% | 중 |

#### Phase 4: 최적화 [0%] ⏳

| ID | 작업 | 상태 | 진행율 | 우선순위 |
|----|------|------|--------|----------|
| 8.4.1 | 다요소 신뢰도 계산 | ⏳ | 0% | 중 |
| 8.4.2 | QA API v2 엔드포인트 | ⏳ | 0% | 중 |
| 8.4.3 | QA 로깅 및 분석 | ⏳ | 0% | 낮음 |

#### 기존 구현 [60%] ✅

| ID | 작업 | 상태 | 진행율 |
|----|------|------|--------|
| 8.0.1 | 기본 Q&A API | ✅ | 100% |
| 8.0.2 | QAPage UI | ✅ | 100% |
| 8.0.3 | 논문 검색 연동 | ✅ | 100% |

---

### 9. 임상 정확도 향상 [0%] ⏳

> 📄 상세: `docs/roadmap/CLINICAL_ACCURACY_ENHANCEMENT.md`

#### 개요
환자 자가 보고(상담 내용)와 진단 키트 결과를 비교하여 임상 정확도 향상

#### Phase 1: 데이터 수집 기반 [0%] ⏳

| ID | 작업 | 상태 | 진행율 | 우선순위 |
|----|------|------|--------|----------|
| 9.1.1 | patient_symptom_history 테이블 | ⏳ | 0% | 높음 |
| 9.1.2 | patient_followup_report 테이블 | ⏳ | 0% | 높음 |
| 9.1.3 | Pre-Test 설문 API | ⏳ | 0% | 높음 |
| 9.1.4 | Pre-Test 설문 UI | ⏳ | 0% | 높음 |
| 9.1.5 | 의사 병력 입력 UI | ⏳ | 0% | 높음 |

#### Phase 2: 비교 분석 엔진 [0%] ⏳

| ID | 작업 | 상태 | 진행율 | 우선순위 |
|----|------|------|--------|----------|
| 9.2.1 | 일치도 분류 로직 (TP/FP/TN/FN) | ⏳ | 0% | 높음 |
| 9.2.2 | Clinical Relevance Score 계산 | ⏳ | 0% | 높음 |
| 9.2.3 | 임상보고서에 관련성 점수 추가 | ⏳ | 0% | 높음 |
| 9.2.4 | 불일치 경고 알림 | ⏳ | 0% | 중 |

#### Phase 3: 추적 관찰 [0%] ⏳

| ID | 작업 | 상태 | 진행율 | 우선순위 |
|----|------|------|--------|----------|
| 9.3.1 | Follow-up 설문 API | ⏳ | 0% | 중 |
| 9.3.2 | 자동 알림 시스템 (3개월 후) | ⏳ | 0% | 중 |
| 9.3.3 | 관련성 점수 재계산 | ⏳ | 0% | 중 |

#### Phase 4: 통계 및 학습 [0%] ⏳

| ID | 작업 | 상태 | 진행율 | 우선순위 |
|----|------|------|--------|----------|
| 9.4.1 | accuracy_statistics 집계 | ⏳ | 0% | 낮음 |
| 9.4.2 | 정확도 대시보드 | ⏳ | 0% | 낮음 |
| 9.4.3 | 알러젠별 최적 cutoff 도출 | ⏳ | 0% | 낮음 |
| 9.4.4 | 개인화 해석 모델 | ⏳ | 0% | 낮음 |

---

## 우선순위별 작업 목록

### 🔴 필수 (즉시)

| ID | 작업 | 현재 진행율 |
|----|------|-------------|
| 7.1 | Backend 테스트 코드 작성 | 0% |
| 7.2 | Frontend 테스트 코드 작성 | 0% |
| 7.3 | API 에러 핸들링 개선 | 30% |

### 🟠 높음 (단기 2~4주)

| ID | 작업 | 현재 진행율 |
|----|------|-------------|
| 6.1 | 임상 보고서 PDF 출력 | 0% |
| 6.2 | 환자 가이드 PDF 출력 | 0% |
| 4.2.3 | ICD-10 코드 자동 매핑 개선 | 30% |
| 4.2.4 | 의사 소견 입력 UI 강화 | 20% |
| 3.3.4 | 의사 소견 UI 개선 | 20% |
| 8.1.1 | Q&A 한글 형태소 분석 | 0% |
| 8.1.2 | Q&A 의학 동의어 사전 | 0% |
| 9.1.3 | 환자 병력 수집 API | 0% |

### 🟡 중간 (중기 1~2개월)

| ID | 작업 | 현재 진행율 |
|----|------|-------------|
| 3.3.1 | 병원별 통계 리포트 | 0% |
| 3.3.3 | SMS/이메일 알림 | 0% |
| 4.3.1 | PubMed 논문 자동 검증 | 0% |
| 5.6 | MeSH Terms 활용 | 0% |
| 8.2.1~5 | Q&A 하이브리드 검색 | 0% |
| 8.3.1~3 | Q&A LLM 통합 | 0% |
| 9.2.1~3 | 임상 정확도 비교 분석 엔진 | 0% |

### 🟢 낮음 (장기 3개월+)

| ID | 작업 | 현재 진행율 |
|----|------|-------------|
| 3.4.1 | 검사 결과 자동 연동 | 0% |
| 3.4.2 | 다국어 지원 | 0% |
| 4.4.1 | SOAP Note 임상 노트 | 0% |
| 4.4.2 | 치료 프로토콜 템플릿 | 0% |
| 9.4.1~4 | 임상 정확도 통계/학습 | 0% |

---

## 마일스톤

| 마일스톤 | 목표 | 상태 |
|----------|------|------|
| M1: MVP | 기본 진단 입력/조회 | ✅ 완료 |
| M2: 서비스 이원화 | Professional/Consumer 분리 | ✅ 완료 |
| M3: 임상 보고서 | GRADE 기반 임상 문서 | ✅ 완료 |
| M4: PDF 리포트 | 임상 보고서/환자 가이드 출력 | ⏳ 진행 예정 |
| M5: 테스트 커버리지 | 70% 이상 | ⏳ 진행 예정 |
| M6: 병원 통계 | 리포트 및 알림 시스템 | ⏳ 예정 |

---

## 관련 문서

| 문서 | 경로 | 설명 |
|------|------|------|
| 병원 서비스 로드맵 | `docs/roadmap/HOSPITAL_SERVICE_ROADMAP.md` | Phase별 상세 계획 |
| 임상 문서 시스템 | `docs/roadmap/PHYSICIAN_DOCUMENT_SYSTEM.md` | 의사 전용 문서 계획 |
| 의료 전문가 고도화 | `docs/roadmap/MEDICAL_PROFESSIONAL_ENHANCEMENT_PLAN.md` | 역할/권한 상세 |
| 논문 링크 추출 | `docs/roadmap/PAPER_LINK_EXTRACTION_ROADMAP.md` | 논문 자동화 계획 |
| **Q&A 시스템 고도화** | `docs/roadmap/QA_SYSTEM_ENHANCEMENT.md` | 키워드 추출, LLM 연동 |
| **임상 정확도 향상** | `docs/roadmap/CLINICAL_ACCURACY_ENHANCEMENT.md` | 환자 자가보고 비교 분석 |
| 임상보고서 샘플 가이드 | `docs/SAMPLE_CLINICAL_REPORT_GUIDE.md` | 의료진/진단업체용 가이드 |
| 브랜치 워크플로우 | `docs/dev/BRANCH_WORKFLOW.md` | 개발 프로세스 |
| 개발 논의 | `docs/dev/DISCUSS.md` | Claude와 논의 내역 |

---

## 변경 이력

> 상세 변경 이력은 [Wiki Roadmap - CHANGELOG](https://github.com/bluevlad/AllergyInsight/wiki/7.-Roadmap#77-변경-로그-changelog) 참조

| 날짜 | 버전 | 요약 |
|------|------|------|
| 2025-01-27 | 1.1 | Q&A 시스템(8), 임상 정확도(9) 섹션 추가 |
| 2025-01-27 | 1.0 | 초기 WBS 작성 |

---

## WBS 관리 가이드

### 업데이트 규칙

| 시점 | WBS 업데이트 | Wiki 업데이트 |
|------|-------------|---------------|
| 작업 시작 | 상태: ⏳→🔄 | - |
| 작업 완료 | 상태: 🔄→✅, 진행율 갱신 | CHANGELOG에 변경 내역 추가 |
| 새 작업 추가 | 항목 추가, ID 부여 | CHANGELOG에 Added 기록 |

### 상태 아이콘

| 아이콘 | 의미 |
|--------|------|
| ✅ | 완료 |
| 🔄 | 진행중 |
| ⏳ | 예정 |
